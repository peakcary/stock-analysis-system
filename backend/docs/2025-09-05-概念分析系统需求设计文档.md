# 2025-09-05 è‚¡ç¥¨æ¦‚å¿µåˆ†æç³»ç»Ÿéœ€æ±‚è®¾è®¡æ–‡æ¡£

## ğŸ“„ æ–‡æ¡£æ¦‚è¿°

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-09-05  
**é¡¹ç›®é˜¶æ®µ**: éœ€æ±‚åˆ†æä¸ç³»ç»Ÿè®¾è®¡  
**åŠŸèƒ½æ¨¡å—**: è‚¡ç¥¨æ¦‚å¿µæ’ååˆ†æç³»ç»Ÿ

## ğŸ¯ ä¸šåŠ¡éœ€æ±‚åˆ†æ

### **æ ¸å¿ƒä¸šåŠ¡æµç¨‹**

```
æ¯æ—¥æ•°æ®å¯¼å…¥ â†’ åå°æ’åè®¡ç®— â†’ æ¦‚å¿µç»Ÿè®¡åˆ†æ â†’ ç”¨æˆ·æŸ¥è¯¢å±•ç¤º
     â†“              â†“              â†“              â†“
   CSV/TXT      ä¸ªè‚¡æ¦‚å¿µæ’å    æ¦‚å¿µæ€»å’Œè®¡ç®—    ä¸‰å¤§æŸ¥è¯¢ç•Œé¢
   æ–‡ä»¶å¯¼å…¥      æ—¥åº¦æ›´æ–°        å†å²å¯¹æ¯”        å›¾è¡¨å±•ç¤º
```

### **è¯¦ç»†åŠŸèƒ½éœ€æ±‚**

#### **1. æ•°æ®å¤„ç†éœ€æ±‚**
- âœ… æ¯æ—¥è‡ªåŠ¨å¯¼å…¥CSVå’ŒTXTæ•°æ®
- ğŸ”„ **æ–°å¢**: å¯¼å…¥åè‡ªåŠ¨è§¦å‘æ’åè®¡ç®—
- ğŸ”„ **æ–°å¢**: è®¡ç®—æ‰€æœ‰æ¦‚å¿µä¸­ä¸ªè‚¡çš„æ¯æ—¥æ’å
- ğŸ”„ **æ–°å¢**: è®¡ç®—æ¦‚å¿µæ¯æ—¥æ€»å’Œï¼ˆæ‰€æœ‰ä¸ªè‚¡çƒ­åº¦æ±‚å’Œï¼‰

#### **2. ä¸ªè‚¡æŸ¥è¯¢éœ€æ±‚**
- ğŸ” è¾“å…¥è‚¡ç¥¨ä»£ç  â†’ è¿”å›è‚¡ç¥¨ä¿¡æ¯å’Œæ‰€å±æ¦‚å¿µ
- ğŸ“Š æ¦‚å¿µæŒ‰çƒ­åº¦æ€»å’Œä»é«˜åˆ°ä½æ’åˆ—
- ğŸ¯ ç‚¹å‡»æ¦‚å¿µ â†’ æ˜¾ç¤ºè¯¥æ¦‚å¿µæ‰€æœ‰ä¸ªè‚¡
- ğŸ“‘ åˆ†é¡µæ˜¾ç¤ºï¼šå‰10ä¸ªæ˜¾ç¤ºï¼Œå…¶ä½™éšè—ï¼Œå¯å±•å¼€æŸ¥çœ‹

#### **3. æ¦‚å¿µè‚¡æŸ¥è¯¢éœ€æ±‚**
- ğŸ”¢ å¯é…ç½®æŸ¥è¯¢å‰Nçš„æ¦‚å¿µè‚¡ï¼ˆå¦‚å‰3ã€å‰10ï¼‰
- ğŸ“ˆ è¿”å›æ‰€æœ‰æ¦‚å¿µçš„å‰Nä¸ªè‚¡ç¥¨
- ğŸ“Š æŒ‰æ¦‚å¿µçƒ­åº¦æ€»å’Œæ’åº

#### **4. åˆ›æ–°é«˜åˆ†æéœ€æ±‚**
- ğŸ“… å¯é…ç½®æ—¶é—´èŒƒå›´ï¼ˆå¦‚10å¤©å†…ï¼‰
- ğŸš€ è¯†åˆ«æ¦‚å¿µæ€»å’Œåˆ›æ–°é«˜çš„æ¦‚å¿µ
- ğŸ“Š æŒ‰ä¸ªè‚¡æ’åå±•ç¤ºè¿™äº›æ¦‚å¿µçš„è‚¡ç¥¨
- ğŸ“ˆ æä¾›å†å²å¯¹æ¯”æ•°æ®

#### **5. å›¾è¡¨å±•ç¤ºéœ€æ±‚**
- ğŸ“Š ä¸ªè‚¡åœ¨æ‰€é€‰æ¦‚å¿µå†…çš„æ’åè¶‹åŠ¿å›¾
- ğŸ“ˆ æ¦‚å¿µæ¯æ—¥æ€»å’Œè¶‹åŠ¿å›¾
- ğŸ¯ ç‚¹å‡»ä»»æ„è‚¡ç¥¨ä»£ç  â†’ æŸ¥çœ‹è¯¦ç»†å›¾è¡¨
- ğŸ“± å“åº”å¼å›¾è¡¨è®¾è®¡

#### **6. è½¬å€ºä¸“é¡¹éœ€æ±‚**
- ğŸ’° 1å¼€å¤´çš„è½¬å€ºä»£ç å•ç‹¬å¤„ç†
- ğŸ“Š è½¬å€ºæ¦‚å¿µæ’è¡ŒåŠŸèƒ½
- ğŸ“ˆ è½¬å€ºä¸“ç”¨å›¾è¡¨ç•Œé¢
- ğŸ” è½¬å€ºæŸ¥è¯¢åŠŸèƒ½ç‹¬ç«‹

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### **æ•´ä½“æ¶æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯ç”¨æˆ·ç•Œé¢å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ä¸ªè‚¡æŸ¥è¯¢ç•Œé¢   â”‚   åˆ›æ–°é«˜åˆ†æç•Œé¢ â”‚     è½¬å€ºåˆ†æç•Œé¢        â”‚
â”‚   Stock Query   â”‚   Innovation    â”‚   Convertible Bond      â”‚
â”‚   Interface     â”‚   Analysis      â”‚   Analysis Interface    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APIæ¥å£å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æŸ¥è¯¢æœåŠ¡API    â”‚   æ’ååˆ†æAPI   â”‚     å›¾è¡¨æ•°æ®API         â”‚
â”‚   Query Service â”‚   Ranking API   â”‚   Chart Data API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸šåŠ¡é€»è¾‘å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¦‚å¿µåˆ†ææœåŠ¡   â”‚   æ’åè®¡ç®—æœåŠ¡   â”‚     æ•°æ®ç»Ÿè®¡æœåŠ¡        â”‚
â”‚   Concept       â”‚   Ranking       â”‚   Statistics Service   â”‚
â”‚   Analysis      â”‚   Calculator    â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å¤„ç†å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ•°æ®å¯¼å…¥æœåŠ¡   â”‚   åå°è®¡ç®—ä»»åŠ¡   â”‚     æ•°æ®ç¼“å­˜æœåŠ¡        â”‚
â”‚   Data Import   â”‚   Background    â”‚   Cache Service         â”‚
â”‚   Service       â”‚   Calculator    â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å­˜å‚¨å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     æ ¸å¿ƒæ•°æ®     â”‚    æ’åæ•°æ®     â”‚      ç¼“å­˜å­˜å‚¨           â”‚
â”‚   Core Database â”‚   Ranking Data  â”‚   Redis Cache           â”‚
â”‚   (MySQL)       â”‚   (MySQL)       â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ æ•°æ®åº“è®¾è®¡

### **æ–°å¢è¡¨ç»“æ„**

#### **1. æ¯æ—¥æ¦‚å¿µæ’åè¡¨**
```sql
CREATE TABLE daily_concept_rankings (
    id INT PRIMARY KEY AUTO_INCREMENT,
    concept_id INT NOT NULL,
    stock_id INT NOT NULL,
    trade_date DATE NOT NULL,
    rank_in_concept INT NOT NULL,           -- è‚¡ç¥¨åœ¨æ¦‚å¿µå†…çš„æ’å
    heat_value DECIMAL(15,2) NOT NULL,      -- çƒ­åº¦å€¼
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_concept_stock_date (concept_id, stock_id, trade_date),
    KEY idx_concept_date (concept_id, trade_date),
    KEY idx_stock_date (stock_id, trade_date),
    KEY idx_trade_date (trade_date),
    
    FOREIGN KEY (concept_id) REFERENCES concepts(id),
    FOREIGN KEY (stock_id) REFERENCES stocks(id)
);
```

#### **2. æ¯æ—¥æ¦‚å¿µæ±‡æ€»è¡¨**
```sql
CREATE TABLE daily_concept_summaries (
    id INT PRIMARY KEY AUTO_INCREMENT,
    concept_id INT NOT NULL,
    trade_date DATE NOT NULL,
    total_heat_value DECIMAL(15,2) NOT NULL,    -- æ¦‚å¿µæ€»çƒ­åº¦å€¼
    stock_count INT NOT NULL,                   -- æ¦‚å¿µå†…è‚¡ç¥¨æ•°é‡
    avg_heat_value DECIMAL(15,2) NOT NULL,      -- å¹³å‡çƒ­åº¦å€¼
    max_heat_value DECIMAL(15,2) NOT NULL,      -- æœ€é«˜çƒ­åº¦å€¼
    min_heat_value DECIMAL(15,2) NOT NULL,      -- æœ€ä½çƒ­åº¦å€¼
    is_new_high BOOLEAN DEFAULT FALSE,          -- æ˜¯å¦åˆ›æ–°é«˜
    new_high_days INT DEFAULT 0,                -- åˆ›æ–°é«˜å¤©æ•°
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_concept_date (concept_id, trade_date),
    KEY idx_concept_id (concept_id),
    KEY idx_trade_date (trade_date),
    KEY idx_total_heat (total_heat_value DESC),
    KEY idx_new_high (is_new_high, trade_date),
    
    FOREIGN KEY (concept_id) REFERENCES concepts(id)
);
```

#### **3. åˆ†æä»»åŠ¡è®°å½•è¡¨**
```sql
CREATE TABLE daily_analysis_tasks (
    id INT PRIMARY KEY AUTO_INCREMENT,
    trade_date DATE NOT NULL,
    task_type ENUM('ranking_calculation', 'summary_calculation', 'innovation_analysis') NOT NULL,
    status ENUM('pending', 'running', 'completed', 'failed') DEFAULT 'pending',
    started_at TIMESTAMP NULL,
    completed_at TIMESTAMP NULL,
    error_message TEXT,
    processed_records INT DEFAULT 0,
    total_records INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_date_task (trade_date, task_type),
    KEY idx_trade_date (trade_date),
    KEY idx_status (status)
);
```

## ğŸ”§ æ ¸å¿ƒæœåŠ¡è®¾è®¡

### **1. æ’åè®¡ç®—æœåŠ¡ (RankingCalculatorService)**

```python
class RankingCalculatorService:
    """æ¦‚å¿µæ’åè®¡ç®—æœåŠ¡"""
    
    async def calculate_daily_rankings(self, trade_date: date) -> Dict[str, Any]:
        """è®¡ç®—æŒ‡å®šæ—¥æœŸçš„æ¦‚å¿µæ’å"""
        
    async def calculate_concept_summaries(self, trade_date: date) -> Dict[str, Any]:
        """è®¡ç®—æ¦‚å¿µæ±‡æ€»æ•°æ®"""
        
    async def detect_innovation_highs(self, trade_date: date, days_back: int = 10) -> List[int]:
        """æ£€æµ‹åˆ›æ–°é«˜æ¦‚å¿µ"""
        
    async def recalculate_rankings(self, start_date: date, end_date: date) -> Dict[str, Any]:
        """é‡æ–°è®¡ç®—æŒ‡å®šæ—¥æœŸèŒƒå›´çš„æ’å"""
```

### **2. æ¦‚å¿µåˆ†ææœåŠ¡ (ConceptAnalysisService)**

```python
class ConceptAnalysisService:
    """æ¦‚å¿µåˆ†ææœåŠ¡"""
    
    async def get_stock_concepts_ranked(self, stock_code: str, trade_date: date = None) -> Dict[str, Any]:
        """è·å–è‚¡ç¥¨çš„æ‰€æœ‰æ¦‚å¿µï¼ˆæŒ‰çƒ­åº¦æ’åºï¼‰"""
        
    async def get_concept_stocks_ranked(self, concept_id: int, trade_date: date = None, 
                                      limit: int = 10, offset: int = 0) -> Dict[str, Any]:
        """è·å–æ¦‚å¿µå†…è‚¡ç¥¨æ’å"""
        
    async def get_top_concepts_stocks(self, top_n: int = 10, trade_date: date = None) -> Dict[str, Any]:
        """è·å–å‰Næ¦‚å¿µçš„æ‰€æœ‰è‚¡ç¥¨"""
        
    async def get_innovation_concept_stocks(self, days_back: int = 10, 
                                          trade_date: date = None) -> Dict[str, Any]:
        """è·å–åˆ›æ–°é«˜æ¦‚å¿µçš„è‚¡ç¥¨"""
        
    async def get_convertible_bond_analysis(self, trade_date: date = None) -> Dict[str, Any]:
        """è·å–è½¬å€ºåˆ†ææ•°æ®"""
```

### **3. å›¾è¡¨æ•°æ®æœåŠ¡ (ChartDataService)**

```python
class ChartDataService:
    """å›¾è¡¨æ•°æ®æœåŠ¡"""
    
    async def get_stock_ranking_chart(self, stock_code: str, concept_id: int, 
                                    days_back: int = 30) -> Dict[str, Any]:
        """è·å–è‚¡ç¥¨åœ¨æ¦‚å¿µå†…çš„æ’åå›¾è¡¨æ•°æ®"""
        
    async def get_concept_trend_chart(self, concept_id: int, 
                                    days_back: int = 30) -> Dict[str, Any]:
        """è·å–æ¦‚å¿µçƒ­åº¦è¶‹åŠ¿å›¾è¡¨æ•°æ®"""
        
    async def get_stock_detail_chart(self, stock_code: str, 
                                   days_back: int = 30) -> Dict[str, Any]:
        """è·å–è‚¡ç¥¨è¯¦ç»†å›¾è¡¨æ•°æ®"""
        
    async def get_convertible_bond_chart(self, stock_code: str, 
                                       days_back: int = 30) -> Dict[str, Any]:
        """è·å–è½¬å€ºå›¾è¡¨æ•°æ®"""
```

## ğŸ”„ ä¸šåŠ¡æµç¨‹è®¾è®¡

### **æ¯æ—¥æ•°æ®å¤„ç†æµç¨‹**

```python
async def daily_data_processing_workflow(trade_date: date):
    """æ¯æ—¥æ•°æ®å¤„ç†å·¥ä½œæµ"""
    
    # 1. æ•°æ®å¯¼å…¥å®Œæˆåè§¦å‘
    await trigger_daily_analysis(trade_date)
    
    # 2. è®¡ç®—æ¦‚å¿µå†…è‚¡ç¥¨æ’å
    ranking_result = await ranking_calculator.calculate_daily_rankings(trade_date)
    
    # 3. è®¡ç®—æ¦‚å¿µæ±‡æ€»ç»Ÿè®¡
    summary_result = await ranking_calculator.calculate_concept_summaries(trade_date)
    
    # 4. æ£€æµ‹åˆ›æ–°é«˜æ¦‚å¿µ
    innovation_concepts = await ranking_calculator.detect_innovation_highs(trade_date)
    
    # 5. æ›´æ–°ç¼“å­˜
    await cache_service.update_daily_cache(trade_date)
    
    # 6. å‘é€å®Œæˆé€šçŸ¥
    await notification_service.send_completion_notice(trade_date)
```

### **æŸ¥è¯¢å¤„ç†æµç¨‹**

```python
# ä¸ªè‚¡æŸ¥è¯¢æµç¨‹
stock_code = "000001"
stock_info = await concept_analysis.get_stock_concepts_ranked(stock_code)

# æ¦‚å¿µè‚¡æŸ¥è¯¢æµç¨‹  
concept_id = 1
concept_stocks = await concept_analysis.get_concept_stocks_ranked(
    concept_id, limit=10, offset=0
)

# åˆ›æ–°é«˜åˆ†ææµç¨‹
innovation_data = await concept_analysis.get_innovation_concept_stocks(days_back=10)
```

## ğŸ¨ APIæ¥å£è®¾è®¡

### **1. ä¸ªè‚¡æŸ¥è¯¢ç›¸å…³æ¥å£**

```python
# è·å–è‚¡ç¥¨æ¦‚å¿µä¿¡æ¯
GET /api/v1/stocks/{stock_code}/concepts
# è·å–æ¦‚å¿µå†…è‚¡ç¥¨æ’å
GET /api/v1/concepts/{concept_id}/stocks?limit=10&offset=0
# è·å–è‚¡ç¥¨å›¾è¡¨æ•°æ®
GET /api/v1/stocks/{stock_code}/charts?concept_id=1&days=30
```

### **2. æ’ååˆ†æç›¸å…³æ¥å£**

```python
# è·å–å‰Næ¦‚å¿µè‚¡
GET /api/v1/rankings/top-concepts?top_n=10&date=2025-08-28
# è·å–åˆ›æ–°é«˜æ¦‚å¿µè‚¡
GET /api/v1/rankings/innovation-concepts?days_back=10&date=2025-08-28
# è·å–æ¦‚å¿µè¶‹åŠ¿å›¾è¡¨
GET /api/v1/concepts/{concept_id}/trend-chart?days=30
```

### **3. è½¬å€ºåˆ†æç›¸å…³æ¥å£**

```python
# è·å–è½¬å€ºæ¦‚å¿µåˆ†æ
GET /api/v1/convertible-bonds/concepts
# è·å–è½¬å€ºæ’å
GET /api/v1/convertible-bonds/rankings?concept_id=1
# è·å–è½¬å€ºå›¾è¡¨
GET /api/v1/convertible-bonds/{bond_code}/charts
```

## ğŸ“Š ç•Œé¢åŠŸèƒ½è®¾è®¡

### **ç•Œé¢1: ä¸ªè‚¡æŸ¥è¯¢ç•Œé¢**

**åŠŸèƒ½ç»„ä»¶**:
```typescript
// æŸ¥è¯¢ç»„ä»¶
StockSearchComponent {
  - è‚¡ç¥¨ä»£ç è¾“å…¥æ¡†
  - æœç´¢æŒ‰é’®
  - è‚¡ç¥¨åŸºç¡€ä¿¡æ¯æ˜¾ç¤º
}

// æ¦‚å¿µåˆ—è¡¨ç»„ä»¶
ConceptListComponent {
  - æ¦‚å¿µåç§°ï¼ˆæŒ‰çƒ­åº¦æ’åºï¼‰
  - æ¦‚å¿µçƒ­åº¦å€¼
  - ç‚¹å‡»å±•å¼€æ¦‚å¿µè‚¡
}

// æ¦‚å¿µè‚¡ç¥¨åˆ—è¡¨ç»„ä»¶
ConceptStockListComponent {
  - å‰10è‚¡ç¥¨æ˜¾ç¤º
  - "æ˜¾ç¤ºæ›´å¤š"æŒ‰é’®
  - è‚¡ç¥¨æ’åå’Œçƒ­åº¦
  - è‚¡ç¥¨ä»£ç ç‚¹å‡»é“¾æ¥
}

// å›¾è¡¨ç»„ä»¶
StockChartComponent {
  - è‚¡ç¥¨åœ¨æ¦‚å¿µå†…æ’åå›¾è¡¨
  - æ¦‚å¿µæ€»å’Œè¶‹åŠ¿å›¾è¡¨
  - å›¾è¡¨æ—¶é—´èŒƒå›´é€‰æ‹©
}
```

### **ç•Œé¢2: åˆ›æ–°é«˜åˆ†æç•Œé¢**

**åŠŸèƒ½ç»„ä»¶**:
```typescript
// å‚æ•°è®¾ç½®ç»„ä»¶
InnovationParameterComponent {
  - æ—¶é—´èŒƒå›´è¾“å…¥(å¤©æ•°)
  - æ—¥æœŸé€‰æ‹©å™¨
  - åˆ†ææŒ‰é’®
}

// åˆ›æ–°é«˜æ¦‚å¿µåˆ—è¡¨
InnovationConceptListComponent {
  - åˆ›æ–°é«˜æ¦‚å¿µåç§°
  - åˆ›æ–°é«˜å¤©æ•°æ˜¾ç¤º
  - æ¦‚å¿µçƒ­åº¦å˜åŒ–
  - ç‚¹å‡»æŸ¥çœ‹æ¦‚å¿µè‚¡
}

// æ¦‚å¿µè‚¡æ’åç»„ä»¶
ConceptStockRankingComponent {
  - æ¦‚å¿µå†…è‚¡ç¥¨æ’åè¡¨
  - çƒ­åº¦å€¼å’Œæ¶¨å¹…æ˜¾ç¤º
  - è‚¡ç¥¨å›¾è¡¨é“¾æ¥
}
```

### **ç•Œé¢3: è½¬å€ºåˆ†æç•Œé¢**

**åŠŸèƒ½ç»„ä»¶**:
```typescript
// è½¬å€ºæ¦‚å¿µæ’åç»„ä»¶
ConvertibleBondConceptComponent {
  - è½¬å€ºæ¦‚å¿µåˆ—è¡¨
  - æ¦‚å¿µçƒ­åº¦æ’å
  - è½¬å€ºæ•°é‡ç»Ÿè®¡
}

// è½¬å€ºæ’ååˆ—è¡¨ç»„ä»¶
ConvertibleBondRankingComponent {
  - è½¬å€ºä»£ç å’Œåç§°
  - è½¬å€ºçƒ­åº¦æ’å
  - æ­£è‚¡å¯¹åº”å…³ç³»
}

// è½¬å€ºå›¾è¡¨ç»„ä»¶
ConvertibleBondChartComponent {
  - è½¬å€ºçƒ­åº¦è¶‹åŠ¿å›¾
  - è½¬å€ºæ¦‚å¿µæ’åå›¾
  - ä¸æ­£è‚¡å¯¹æ¯”å›¾
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### **1. æ•°æ®åº“ä¼˜åŒ–**
- åˆç†çš„ç´¢å¼•è®¾è®¡
- åˆ†åŒºè¡¨å¤„ç†å†å²æ•°æ®
- è¯»å†™åˆ†ç¦»æ¶æ„
- æŸ¥è¯¢ç»“æœç¼“å­˜

### **2. è®¡ç®—ä¼˜åŒ–**
- å¼‚æ­¥æ‰¹é‡è®¡ç®—
- å¢é‡æ›´æ–°æœºåˆ¶
- å®šæ—¶ä»»åŠ¡è°ƒåº¦
- è®¡ç®—ç»“æœé¢„å­˜

### **3. ç¼“å­˜ç­–ç•¥**
- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- åˆ†å±‚ç¼“å­˜è®¾è®¡
- ç¼“å­˜æ›´æ–°ç­–ç•¥
- ç¼“å­˜ç©¿é€é˜²æŠ¤

## ğŸ“ˆ å¼€å‘è®¡åˆ’

### **Phase 1: æ•°æ®è®¡ç®—å±‚ (3-4å¤©)**
- [ ] æ’åè®¡ç®—æœåŠ¡å¼€å‘
- [ ] æ¦‚å¿µæ±‡æ€»ç»Ÿè®¡åŠŸèƒ½
- [ ] åˆ›æ–°é«˜æ£€æµ‹ç®—æ³•
- [ ] åå°ä»»åŠ¡è°ƒåº¦

### **Phase 2: APIæ¥å£å±‚ (2-3å¤©)**
- [ ] æŸ¥è¯¢æœåŠ¡APIå¼€å‘
- [ ] æ’ååˆ†æAPIå¼€å‘
- [ ] å›¾è¡¨æ•°æ®APIå¼€å‘
- [ ] è½¬å€ºåˆ†æAPIå¼€å‘

### **Phase 3: ä¸šåŠ¡é€»è¾‘å®Œå–„ (2-3å¤©)**
- [ ] åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
- [ ] æ•°æ®éªŒè¯å’Œå®¹é”™
- [ ] ç¼“å­˜æœºåˆ¶å®ç°
- [ ] æ€§èƒ½ç›‘æ§

### **Phase 4: æµ‹è¯•å’Œä¼˜åŒ– (1-2å¤©)**
- [ ] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•å’Œè°ƒä¼˜
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ–‡æ¡£å®Œå–„

---

**é¢„è®¡æ€»å¼€å‘æ—¶é—´**: 8-12å¤©  
**æ ¸å¿ƒæŒ‘æˆ˜**: å¤§æ•°æ®é‡çš„æ’åè®¡ç®—æ€§èƒ½ä¼˜åŒ–  
**å…³é”®æˆåŠŸå› ç´ **: é«˜æ•ˆçš„ç®—æ³•è®¾è®¡å’Œåˆç†çš„ç¼“å­˜ç­–ç•¥