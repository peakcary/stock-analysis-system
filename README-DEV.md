# 🛠️ 开发环境快速配置指南

## 🎯 解决问题

这个智能配置系统专门解决**换电脑开发**时的常见问题：
- ✅ 端口冲突自动检测和分配
- ✅ 数据库连接自动配置
- ✅ API接口地址智能更新
- ✅ 依赖检查和安装
- ✅ 一键启动和停止

## 🚀 快速开始

### 新环境首次配置
```bash
# 1. 一键配置开发环境
./dev-setup.sh

# 2. 启动所有服务
./smart-start.sh
```

### 日常开发使用
```bash
# 启动服务
./smart-start.sh

# 停止服务  
./smart-stop.sh

# 检查问题
./debug-issues.sh
```

## 📋 生成的智能工具

| 工具 | 用途 | 使用场景 |
|------|------|----------|
| `./dev-setup.sh` | 环境配置 | 首次使用、换电脑 |
| `./smart-start.sh` | 启动服务 | 日常开发启动 |
| `./smart-stop.sh` | 停止服务 | 开发结束 |
| `./debug-issues.sh` | 问题检测 | 遇到异常时 |
| `dev-ports.env` | 端口配置 | 自动生成 |

## 🔧 自动解决的问题

### 1. 端口冲突
- **问题**: 3007、8005、8006端口被占用
- **解决**: 自动分配可用端口（如3008、8007等）
- **配置**: 自动更新所有配置文件

### 2. 数据库连接
- **问题**: MySQL连接参数错误或不存在
- **解决**: 自动检测和配置数据库连接
- **支持**: localhost、127.0.0.1等多种连接方式

### 3. API接口配置  
- **问题**: 前端API地址与后端端口不匹配
- **解决**: 自动更新前端API配置文件
- **文件**: 客户端和管理端的API配置

### 4. 依赖检查
- **问题**: node_modules、venv不存在
- **解决**: 自动检查并提示安装命令
- **覆盖**: Python虚拟环境和Node.js依赖

## 🎯 系统架构

```
当前端口配置:
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   客户端服务     │    │   管理端服务     │    │   API接口服务   │
│   端口: 8007    │    │   端口: 8007    │    │   端口: 3008    │
│                 │    │                 │    │                 │
│ React + TS      │    │ React + TS      │    │ FastAPI        │
│ http://localhost│    │ http://localhost│    │ http://localhost│
│      :8007      │    │      :8007      │    │      :3008      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 📊 访问地址

启动成功后的访问地址：
- 🔗 **API文档**: http://localhost:3008/docs
- 📱 **客户端**: http://localhost:8007  
- 🖥️ **管理端**: http://localhost:8007

## 🛠️ 故障排除

### 服务无响应
```bash
# 检查问题
./debug-issues.sh

# 重新配置
./dev-setup.sh

# 重启服务
./smart-stop.sh && ./smart-start.sh
```

### 端口被占用
```bash
# 自动重新分配端口
./dev-setup.sh
```

### 数据库连接失败
```bash
# 检查MySQL服务状态
brew services list | grep mysql

# 启动MySQL（macOS）
brew services start mysql

# 重新配置数据库连接
./dev-setup.sh
```

## 🎉 优势特性

1. **智能端口管理**: 自动检测冲突，动态分配端口
2. **配置同步**: 一次配置，所有服务配置自动更新  
3. **问题检测**: 全面的环境检查和问题诊断
4. **一键操作**: 启动、停止、配置都是一键完成
5. **跨平台兼容**: 支持macOS、Linux、Windows

## 📝 日志查看

服务日志文件位置：
```bash
logs/
├── backend.log    # API服务日志
├── client.log     # 客户端日志  
├── frontend.log   # 管理端日志
├── backend.pid    # API服务进程ID
├── client.pid     # 客户端进程ID
└── frontend.pid   # 管理端进程ID
```

查看实时日志：
```bash
# 查看所有服务日志
tail -f logs/*.log

# 查看特定服务日志
tail -f logs/backend.log
```

---

💡 **提示**: 这个系统解决了开发者最头疼的环境配置问题，现在可以在任何电脑上快速启动开发环境！