# ğŸ“Š è‚¡ç¥¨åˆ†æç³»ç»Ÿ - ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

[![Version](https://img.shields.io/badge/Version-v2.6.0-blue.svg)](./README.md)
[![Last Updated](https://img.shields.io/badge/Updated-2025--09--13-green.svg)](#)

## ğŸ“„ æ–‡æ¡£æ¦‚è¿°

**æ–‡æ¡£ç‰ˆæœ¬**: v2.6.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-09-13  
**æ›´æ–°æ—¥æœŸ**: 2025-09-13  
**é¡¹ç›®é˜¶æ®µ**: ç”Ÿäº§ç¯å¢ƒè¿è¡Œ  
**æ ¸å¿ƒåŠŸèƒ½**: è‚¡ç¥¨åˆ†æã€æ¦‚å¿µåˆ†æã€ç”¨æˆ·ç®¡ç†ã€æ”¯ä»˜ç³»ç»Ÿ  

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰ç«¯ç”¨æˆ·ç•Œé¢å±‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç®¡ç†ç«¯å‰ç«¯         â”‚     å®¢æˆ·ç«¯å‰ç«¯        â”‚      å…±äº«ç»„ä»¶åº“               â”‚
â”‚   (React + Ant)      â”‚   (React + Ant)      â”‚   (TypeScript)                â”‚
â”‚   Port: 8006         â”‚   Port: 8005         â”‚   è®¤è¯/å·¥å…·/ç±»å‹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            APIç½‘å…³å±‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç®¡ç†å‘˜è®¤è¯         â”‚     ç”¨æˆ·è®¤è¯          â”‚      è·¯ç”±åˆ†å‘                 â”‚
â”‚   JWT + æƒé™æ§åˆ¶      â”‚   JWT + ä¼šå‘˜é™åˆ¶      â”‚   è¯·æ±‚éªŒè¯/æ—¥å¿—               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åç«¯APIæœåŠ¡å±‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    è‚¡ç¥¨åˆ†æAPI        â”‚     ç”¨æˆ·ç®¡ç†API       â”‚      æ”¯ä»˜ç³»ç»ŸAPI              â”‚
â”‚   FastAPI            â”‚   FastAPI            â”‚   FastAPI + å¾®ä¿¡æ”¯ä»˜          â”‚
â”‚   Port: 3007         â”‚   SQLAlchemy ORM     â”‚   å¥—é¤ç®¡ç†/è®¢å•å¤„ç†            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ•°æ®å¯¼å…¥æœåŠ¡        â”‚     æ¦‚å¿µåˆ†ææœåŠ¡      â”‚      å›¾è¡¨æ•°æ®æœåŠ¡             â”‚
â”‚   TXT/CSVå¤„ç†         â”‚   æ’åè®¡ç®—/æ±‡æ€»       â”‚   è¶‹åŠ¿å›¾/å¯¹æ¯”å›¾               â”‚
â”‚   è‚¡ç¥¨ä»£ç æ ‡å‡†åŒ–       â”‚   æ¦‚å¿µè‚¡ç¥¨å…³è”        â”‚   å†å²æ•°æ®åˆ†æ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ•°æ®å­˜å‚¨å±‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     æ ¸å¿ƒæ•°æ®åº“        â”‚     ç¼“å­˜ç³»ç»Ÿ          â”‚      æ–‡ä»¶å­˜å‚¨                 â”‚
â”‚   MySQL 8.0          â”‚   Redis (å¯é€‰)        â”‚   æ—¥å¿—æ–‡ä»¶/ä¸Šä¼ æ–‡ä»¶            â”‚
â”‚   äº‹åŠ¡ACIDä¿è¯        â”‚   çƒ­ç‚¹æ•°æ®ç¼“å­˜        â”‚   å¤‡ä»½æ•°æ®                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆé€‰æ‹©

**å‰ç«¯æŠ€æœ¯æ ˆ**:
- **React 18+**: ç°ä»£åŒ–UIæ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œæå‡å¼€å‘æ•ˆç‡
- **Ant Design**: ä¼ä¸šçº§UIç»„ä»¶åº“
- **Vite**: å¿«é€Ÿæ„å»ºå·¥å…·
- **React Router**: è·¯ç”±ç®¡ç†

**åç«¯æŠ€æœ¯æ ˆ**:
- **FastAPI**: é«˜æ€§èƒ½Python Webæ¡†æ¶
- **SQLAlchemy**: Python ORMæ¡†æ¶
- **MySQL 8.0**: å…³ç³»å‹æ•°æ®åº“
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **JWT**: æ— çŠ¶æ€è®¤è¯

**éƒ¨ç½²æŠ€æœ¯æ ˆ**:
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **Nginx**: åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡
- **MySQL**: æ•°æ®æŒä¹…åŒ–
- **Shell Scripts**: è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

## ğŸ’¾ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. è‚¡ç¥¨åŸºç¡€æ•°æ®è¡¨
```sql
CREATE TABLE stocks (
    id INT PRIMARY KEY AUTO_INCREMENT,
    stock_code VARCHAR(20) NOT NULL UNIQUE,
    stock_name VARCHAR(100) NOT NULL,
    market VARCHAR(10) NOT NULL,  -- SH/SZ/BJ
    industry VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_stock_code (stock_code),
    KEY idx_market (market),
    KEY idx_industry (industry),
    KEY idx_active (is_active)
);
```

#### 2. æ¦‚å¿µåŸºç¡€æ•°æ®è¡¨
```sql
CREATE TABLE concepts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    concept_name VARCHAR(100) NOT NULL UNIQUE,
    description TEXT,
    category VARCHAR(50),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_concept_name (concept_name),
    KEY idx_category (category),
    KEY idx_active (is_active)
);
```

#### 3. è‚¡ç¥¨æ¦‚å¿µå…³è”è¡¨
```sql
CREATE TABLE stock_concepts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    stock_code VARCHAR(20) NOT NULL,
    concept_name VARCHAR(100) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_stock_concept (stock_code, concept_name),
    KEY idx_stock_code (stock_code),
    KEY idx_concept_name (concept_name),
    KEY idx_active (is_active)
);
```

#### 4. æ¯æ—¥äº¤æ˜“æ•°æ®è¡¨
```sql
CREATE TABLE daily_trading (
    id INT PRIMARY KEY AUTO_INCREMENT,
    stock_code VARCHAR(20) NOT NULL,
    trading_date DATE NOT NULL,
    trading_volume BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_stock_date (stock_code, trading_date),
    KEY idx_stock_code (stock_code),
    KEY idx_trading_date (trading_date),
    KEY idx_volume (trading_volume DESC)
);
```

#### 5. æ¦‚å¿µæ¯æ—¥æ±‡æ€»è¡¨
```sql
CREATE TABLE concept_daily_summary (
    id INT PRIMARY KEY AUTO_INCREMENT,
    concept_name VARCHAR(100) NOT NULL,
    trading_date DATE NOT NULL,
    total_volume BIGINT NOT NULL,
    stock_count INT NOT NULL,
    average_volume DECIMAL(15,2),
    max_volume BIGINT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_concept_date (concept_name, trading_date),
    KEY idx_concept_name (concept_name),
    KEY idx_trading_date (trading_date),
    KEY idx_total_volume (total_volume DESC)
);
```

#### 6. è‚¡ç¥¨æ¦‚å¿µæ’åè¡¨
```sql
CREATE TABLE stock_concept_ranking (
    id INT PRIMARY KEY AUTO_INCREMENT,
    stock_code VARCHAR(20) NOT NULL,
    concept_name VARCHAR(100) NOT NULL,
    trading_date DATE NOT NULL,
    trading_volume BIGINT NOT NULL,
    concept_rank INT NOT NULL,
    concept_total_volume BIGINT,
    volume_percentage DECIMAL(8,5),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_stock_concept_date (stock_code, concept_name, trading_date),
    KEY idx_stock_code (stock_code),
    KEY idx_concept_name (concept_name),
    KEY idx_trading_date (trading_date),
    KEY idx_concept_rank (concept_rank),
    KEY idx_volume (trading_volume DESC)
);
```

#### 7. æ¦‚å¿µåˆ›æ–°é«˜è®°å½•è¡¨
```sql
CREATE TABLE concept_high_record (
    id INT PRIMARY KEY AUTO_INCREMENT,
    concept_name VARCHAR(100) NOT NULL,
    trading_date DATE NOT NULL,
    total_volume BIGINT NOT NULL,
    is_new_high BOOLEAN DEFAULT FALSE,
    high_type VARCHAR(20), -- 'daily', 'weekly', 'monthly'
    previous_high_volume BIGINT,
    previous_high_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY unique_concept_date (concept_name, trading_date),
    KEY idx_concept_name (concept_name),
    KEY idx_trading_date (trading_date),
    KEY idx_new_high (is_new_high),
    KEY idx_high_type (high_type)
);
```

### ç”¨æˆ·ç³»ç»Ÿè¡¨ç»“æ„

#### 8. å®¢æˆ·ç«¯ç”¨æˆ·è¡¨
```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    membership_level ENUM('free', 'basic', 'premium', 'unlimited') DEFAULT 'free',
    query_limit INT DEFAULT 10,
    queries_used INT DEFAULT 0,
    last_reset_date DATE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_username (username),
    KEY idx_email (email),
    KEY idx_membership (membership_level),
    KEY idx_active (is_active)
);
```

#### 9. ç®¡ç†å‘˜ç”¨æˆ·è¡¨
```sql
CREATE TABLE admin_users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    is_superuser BOOLEAN DEFAULT FALSE,
    last_login TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_username (username),
    KEY idx_email (email),
    KEY idx_active (is_active),
    KEY idx_superuser (is_superuser)
);
```

### æ”¯ä»˜ç³»ç»Ÿè¡¨ç»“æ„

#### 10. å¥—é¤é…ç½®è¡¨
```sql
CREATE TABLE packages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    query_limit INT NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'CNY',
    duration_days INT DEFAULT 30,
    membership_level ENUM('basic', 'premium', 'unlimited'),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_name (name),
    KEY idx_membership (membership_level),
    KEY idx_active (is_active)
);
```

#### 11. æ”¯ä»˜è®¢å•è¡¨
```sql
CREATE TABLE orders (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    package_id INT NOT NULL,
    order_no VARCHAR(32) NOT NULL UNIQUE,
    amount DECIMAL(10,2) NOT NULL,
    status ENUM('pending', 'paid', 'failed', 'refunded') DEFAULT 'pending',
    payment_method VARCHAR(20) DEFAULT 'wechat_pay',
    prepay_id VARCHAR(64),
    transaction_id VARCHAR(64),
    paid_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_user_id (user_id),
    KEY idx_order_no (order_no),
    KEY idx_status (status),
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (package_id) REFERENCES packages(id)
);
```

### æ•°æ®å¯¼å…¥è®°å½•è¡¨

#### 12. TXTå¯¼å…¥è®°å½•è¡¨
```sql
CREATE TABLE txt_import_records (
    id INT PRIMARY KEY AUTO_INCREMENT,
    filename VARCHAR(255) NOT NULL,
    trading_date DATE NOT NULL,
    status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending',
    total_records INT DEFAULT 0,
    success_records INT DEFAULT 0,
    error_records INT DEFAULT 0,
    concept_summary_count INT DEFAULT 0,
    ranking_count INT DEFAULT 0,
    new_high_count INT DEFAULT 0,
    error_message TEXT,
    processing_time_seconds INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    KEY idx_trading_date (trading_date),
    KEY idx_status (status),
    KEY idx_created_at (created_at)
);
```

### ç´¢å¼•ç­–ç•¥

**æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•**:
```sql
-- è‚¡ç¥¨æ¦‚å¿µè”åˆæŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_stock_concept_date ON stock_concept_ranking(stock_code, trading_date);

-- æ¦‚å¿µæ±‡æ€»æ’åºä¼˜åŒ–
CREATE INDEX idx_concept_summary_volume ON concept_daily_summary(trading_date, total_volume DESC);

-- æ—¥æœŸèŒƒå›´æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_trading_date_volume ON daily_trading(trading_date, trading_volume DESC);

-- ç”¨æˆ·æŸ¥è¯¢é™åˆ¶ä¼˜åŒ–
CREATE INDEX idx_user_membership_active ON users(membership_level, is_active);
```

## ğŸ”§ APIæ¥å£è®¾è®¡

### è‚¡ç¥¨åˆ†ææ¥å£

#### 1. æ¦‚å¿µæ±‡æ€»æ¥å£
```python
GET /api/v1/stock-analysis/concepts/daily-summary
Parameters:
  - trading_date: str (YYYY-MM-DD, å¯é€‰)
  - page: int (é¡µç , é»˜è®¤1)
  - size: int (æ¯é¡µæ•°é‡, æœ€å¤§2000)
  - sort_by: str (æ’åºå­—æ®µ: total_volume|stock_count|avg_volume)
  - sort_order: str (æ’åºæ–¹å¼: desc|asc)
  - search: str (æ¦‚å¿µåç§°æœç´¢, å¯é€‰)

Response:
{
  "trading_date": "2025-09-02",
  "summaries": [
    {
      "concept_name": "èèµ„èåˆ¸",
      "total_volume": 622580139,
      "stock_count": 2565,
      "avg_volume": 242721.0,
      "max_volume": 12968518,
      "trading_date": "2025-09-02",
      "volume_percentage": 4.86
    }
  ],
  "pagination": {
    "page": 1,
    "size": 50,
    "total": 150,
    "has_more": true
  }
}
```

#### 2. æ¦‚å¿µè‚¡ç¥¨åˆ—è¡¨æ¥å£
```python
GET /api/v1/stock-analysis/concept/{concept_name}/stocks
Parameters:
  - trading_date: str (YYYY-MM-DD, å¯é€‰)
  - limit: int (è¿”å›æ•°é‡, é»˜è®¤100)
  - offset: int (åç§»é‡, é»˜è®¤0)

Response:
{
  "concept_name": "èèµ„èåˆ¸",
  "trading_date": "2025-09-02",
  "total_volume": 622580139,
  "stock_count": 2565,
  "average_volume": 242721.0,
  "max_volume": 12968518,
  "total_stocks": 2565,
  "stocks": [
    {
      "stock_code": "SH601099",
      "stock_name": "å¤ªå¹³æ´‹",
      "trading_volume": 12968518,
      "concept_rank": 1,
      "volume_percentage": 2.08303
    }
  ],
  "pagination": {
    "offset": 0,
    "limit": 100,
    "total": 2565,
    "has_more": true
  }
}
```

#### 3. ä¸ªè‚¡æ¦‚å¿µåˆ†ææ¥å£
```python
GET /api/v1/stock-analysis/stock/{stock_code}/concepts
Parameters:
  - trading_date: str (YYYY-MM-DD, å¯é€‰)
  - limit: int (è¿”å›æ•°é‡, é»˜è®¤50)

Response:
{
  "stock_code": "SH600000",
  "stock_name": "æµ¦å‘é“¶è¡Œ",
  "trading_date": "2025-09-02",
  "total_trading_volume": 87654321,
  "concepts": [
    {
      "concept_name": "é“¶è¡Œ",
      "concept_rank": 1,
      "trading_volume": 87654321,
      "concept_total_volume": 123456789,
      "volume_percentage": 71.02,
      "stock_count": 33
    }
  ],
  "pagination": {
    "total": 15,
    "limit": 50
  }
}
```

#### 4. è‚¡ç¥¨åˆ—è¡¨æ±‡æ€»æ¥å£
```python
GET /api/v1/stock-analysis/stocks/daily-summary
Parameters:
  - trading_date: str (YYYY-MM-DD, å¯é€‰)
  - page: int (é¡µç , é»˜è®¤1)
  - size: int (æ¯é¡µæ•°é‡, æœ€å¤§1000)
  - search: str (è‚¡ç¥¨ä»£ç /åç§°æœç´¢, å¯é€‰)

Response:
{
  "trading_date": "2025-09-02",
  "stocks": [
    {
      "stock_code": "SH601099",
      "stock_name": "å¤ªå¹³æ´‹",
      "trading_volume": 12968518,
      "concept_count": 15
    }
  ],
  "pagination": {
    "page": 1,
    "size": 50,
    "total": 5432,
    "has_more": true
  }
}
```

### ç”¨æˆ·ç®¡ç†æ¥å£

#### 5. ç”¨æˆ·è®¤è¯æ¥å£
```python
POST /api/v1/auth/login
Body:
{
  "username": "user@example.com",
  "password": "password123"
}

Response:
{
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "token_type": "bearer",
  "expires_in": 3600,
  "user_info": {
    "id": 1,
    "username": "user@example.com",
    "membership_level": "premium",
    "query_limit": 1000,
    "queries_used": 150
  }
}
```

#### 6. ç®¡ç†å‘˜è®¤è¯æ¥å£
```python
POST /api/v1/admin/auth/login
Body:
{
  "username": "admin",
  "password": "admin123"
}

Response:
{
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "token_type": "bearer",
  "expires_in": 3600,
  "admin_info": {
    "id": 1,
    "username": "admin",
    "full_name": "ç³»ç»Ÿç®¡ç†å‘˜",
    "is_superuser": true
  }
}
```

### æ•°æ®å¯¼å…¥æ¥å£

#### 7. TXTæ–‡ä»¶å¯¼å…¥æ¥å£
```python
POST /api/v1/txt-import/import
Headers:
  - Content-Type: multipart/form-data
  - Authorization: Bearer {admin_token}
Body:
  - file: TXTæ–‡ä»¶

Response:
{
  "success": true,
  "message": "å¯¼å…¥æˆåŠŸ",
  "stats": {
    "trading_data_count": 5432,
    "concept_summary_count": 150,
    "ranking_count": 25680,
    "new_high_count": 12,
    "trading_date": "2025-09-02"
  }
}
```

#### 8. é‡æ–°è®¡ç®—æ¥å£
```python
POST /api/v1/txt-import/recalculate
Headers:
  - Authorization: Bearer {admin_token}
Body:
{
  "trading_date": "2025-09-02"
}

Response:
{
  "success": true,
  "message": "é‡æ–°è®¡ç®—å®Œæˆ",
  "stats": {
    "trading_data_count": 5432,
    "concept_summary_count": 150,
    "ranking_count": 25680,
    "new_high_count": 12,
    "trading_date": "2025-09-02"
  }
}
```

### æ”¯ä»˜ç³»ç»Ÿæ¥å£

#### 9. å¥—é¤åˆ—è¡¨æ¥å£
```python
GET /api/v1/packages

Response:
{
  "packages": [
    {
      "id": 1,
      "name": "åŸºç¡€å¥—é¤",
      "description": "100æ¬¡æŸ¥è¯¢",
      "query_limit": 100,
      "price": 29.90,
      "currency": "CNY",
      "duration_days": 30,
      "membership_level": "basic"
    }
  ]
}
```

#### 10. åˆ›å»ºè®¢å•æ¥å£
```python
POST /api/v1/payment/create-order
Headers:
  - Authorization: Bearer {user_token}
Body:
{
  "package_id": 1,
  "payment_method": "wechat_pay"
}

Response:
{
  "order_no": "ORD20250913123456789",
  "amount": 29.90,
  "prepay_info": {
    "appId": "wx...",
    "timeStamp": "1694567890",
    "nonceStr": "abc123",
    "package": "prepay_id=wx...",
    "signType": "RSA",
    "paySign": "sign..."
  }
}
```

## ğŸ”„ ä¸šåŠ¡é€»è¾‘è®¾è®¡

### æ•°æ®å¤„ç†æµç¨‹

#### 1. TXTæ–‡ä»¶å¯¼å…¥æµç¨‹
```python
async def txt_import_workflow(file: UploadFile, admin_user: AdminUser):
    """TXTæ–‡ä»¶å¯¼å…¥å·¥ä½œæµ"""
    
    # 1. æ–‡ä»¶éªŒè¯å’Œè§£æ
    trading_date = parse_trading_date_from_file(file)
    
    # 2. æ£€æŸ¥é‡å¤å¯¼å…¥
    existing_record = check_existing_import(trading_date)
    if existing_record:
        # ç”¨æˆ·ç¡®è®¤è¦†ç›–å¯¼å…¥
        pass
    
    # 3. æ•°æ®æ¸…ç†ï¼ˆå¦‚æœè¦†ç›–ï¼‰
    if overwrite:
        clear_existing_data(trading_date)
    
    # 4. æ‰¹é‡å¯¼å…¥äº¤æ˜“æ•°æ®
    trading_data = parse_trading_data(file)
    import_trading_data(trading_data, trading_date)
    
    # 5. æ‰§è¡Œæ ¸å¿ƒè®¡ç®—
    calculation_results = perform_calculations(trading_date)
    
    # 6. æ›´æ–°å¯¼å…¥è®°å½•
    update_import_record(trading_date, calculation_results)
    
    # 7. è¿”å›ç»Ÿè®¡ç»“æœ
    return {
        "success": True,
        "stats": calculation_results
    }
```

#### 2. æ ¸å¿ƒè®¡ç®—é€»è¾‘
```python
def perform_calculations(trading_date: date) -> Dict:
    """æ‰§è¡Œæ ¸å¿ƒè®¡ç®—é€»è¾‘"""
    
    # 1. è®¡ç®—æ¦‚å¿µæ¯æ—¥æ±‡æ€»
    concept_summaries = calculate_concept_daily_summaries(trading_date)
    
    # 2. è®¡ç®—è‚¡ç¥¨æ¦‚å¿µæ’å
    stock_rankings = calculate_stock_concept_rankings(trading_date)
    
    # 3. æ£€æµ‹æ¦‚å¿µåˆ›æ–°é«˜
    new_highs = detect_concept_new_highs(trading_date)
    
    return {
        "concept_summary_count": len(concept_summaries),
        "ranking_count": len(stock_rankings),
        "new_high_count": len(new_highs),
        "trading_date": trading_date.strftime('%Y-%m-%d')
    }

def calculate_concept_daily_summaries(trading_date: date) -> List[Dict]:
    """è®¡ç®—æ¦‚å¿µæ¯æ—¥æ±‡æ€»"""
    
    # SQLé€»è¾‘ï¼šæŒ‰æ¦‚å¿µåˆ†ç»„æ±‡æ€»äº¤æ˜“é‡
    query = """
    INSERT INTO concept_daily_summary 
    (concept_name, trading_date, total_volume, stock_count, average_volume, max_volume)
    SELECT 
        sc.concept_name,
        dt.trading_date,
        SUM(dt.trading_volume) as total_volume,
        COUNT(DISTINCT dt.stock_code) as stock_count,
        AVG(dt.trading_volume) as average_volume,
        MAX(dt.trading_volume) as max_volume
    FROM daily_trading dt
    JOIN stock_concepts sc ON dt.stock_code = sc.stock_code
    WHERE dt.trading_date = %s AND sc.is_active = TRUE
    GROUP BY sc.concept_name, dt.trading_date
    ORDER BY total_volume DESC
    """
    
    return execute_query(query, [trading_date])

def calculate_stock_concept_rankings(trading_date: date) -> List[Dict]:
    """è®¡ç®—è‚¡ç¥¨æ¦‚å¿µæ’å"""
    
    # SQLé€»è¾‘ï¼šåœ¨æ¯ä¸ªæ¦‚å¿µå†…æŒ‰äº¤æ˜“é‡æ’å
    query = """
    INSERT INTO stock_concept_ranking 
    (stock_code, concept_name, trading_date, trading_volume, concept_rank, 
     concept_total_volume, volume_percentage)
    SELECT 
        dt.stock_code,
        sc.concept_name,
        dt.trading_date,
        dt.trading_volume,
        ROW_NUMBER() OVER (
            PARTITION BY sc.concept_name 
            ORDER BY dt.trading_volume DESC
        ) as concept_rank,
        cds.total_volume as concept_total_volume,
        (dt.trading_volume * 100.0 / cds.total_volume) as volume_percentage
    FROM daily_trading dt
    JOIN stock_concepts sc ON dt.stock_code = sc.stock_code
    JOIN concept_daily_summary cds ON sc.concept_name = cds.concept_name 
        AND dt.trading_date = cds.trading_date
    WHERE dt.trading_date = %s AND sc.is_active = TRUE
    ORDER BY sc.concept_name, concept_rank
    """
    
    return execute_query(query, [trading_date])
```

### è‚¡ç¥¨ä»£ç åŒ¹é…é€»è¾‘

#### æ™ºèƒ½ä»£ç åŒ¹é…
```python
def intelligent_stock_code_matching(stock_code: str) -> List[str]:
    """æ™ºèƒ½è‚¡ç¥¨ä»£ç åŒ¹é…ï¼Œå¤„ç†ä¸åŒè¡¨é—´æ ¼å¼å·®å¼‚"""
    
    possible_codes = [stock_code]
    
    if stock_code.startswith(('SH', 'SZ', 'BJ')):
        # å¦‚æœè¾“å…¥æœ‰å‰ç¼€ï¼Œæ·»åŠ å»å‰ç¼€çš„ç‰ˆæœ¬
        possible_codes.append(stock_code[2:])
    else:
        # å¦‚æœè¾“å…¥æ²¡æœ‰å‰ç¼€ï¼Œæ·»åŠ å„ç§å‰ç¼€ç‰ˆæœ¬
        possible_codes.extend([
            f'SH{stock_code}', 
            f'SZ{stock_code}', 
            f'BJ{stock_code}'
        ])
    
    return possible_codes

def find_stock_with_matching_codes(db: Session, stock_code: str) -> Optional[Stock]:
    """ä½¿ç”¨æ™ºèƒ½åŒ¹é…æŸ¥æ‰¾è‚¡ç¥¨"""
    
    possible_codes = intelligent_stock_code_matching(stock_code)
    
    for code in possible_codes:
        stock = db.query(Stock).filter(Stock.stock_code == code).first()
        if stock:
            return stock
    
    return None
```

### ç”¨æˆ·è®¤è¯ä¸æƒé™æ§åˆ¶

#### JWTè®¤è¯é€»è¾‘
```python
def create_access_token(data: dict, expires_delta: Optional[timedelta] = None):
    """åˆ›å»ºJWTè®¿é—®ä»¤ç‰Œ"""
    
    to_encode = data.copy()
    if expires_delta:
        expire = datetime.utcnow() + expires_delta
    else:
        expire = datetime.utcnow() + timedelta(minutes=15)
    
    to_encode.update({"exp": expire})
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
    return encoded_jwt

def verify_token(token: str) -> Optional[dict]:
    """éªŒè¯JWTä»¤ç‰Œ"""
    
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        return payload
    except JWTError:
        return None

async def get_current_user(token: str = Depends(oauth2_scheme)) -> User:
    """è·å–å½“å‰ç”¨æˆ·"""
    
    payload = verify_token(token)
    if payload is None:
        raise HTTPException(status_code=401, detail="Invalid token")
    
    user_id = payload.get("sub")
    user = get_user_by_id(user_id)
    if user is None:
        raise HTTPException(status_code=401, detail="User not found")
    
    return user
```

#### æŸ¥è¯¢æ¬¡æ•°é™åˆ¶é€»è¾‘
```python
async def check_query_limit(user: User) -> bool:
    """æ£€æŸ¥ç”¨æˆ·æŸ¥è¯¢æ¬¡æ•°é™åˆ¶"""
    
    # æ£€æŸ¥æ˜¯å¦éœ€è¦é‡ç½®è®¡æ•°ï¼ˆæ¯æœˆé‡ç½®ï¼‰
    if should_reset_query_count(user):
        reset_user_query_count(user)
    
    # æ— é™æ¬¡ä¼šå‘˜ä¸å—é™åˆ¶
    if user.membership_level == "unlimited":
        return True
    
    # æ£€æŸ¥æ˜¯å¦è¶…å‡ºé™åˆ¶
    if user.queries_used >= user.query_limit:
        return False
    
    # å¢åŠ ä½¿ç”¨æ¬¡æ•°
    increment_user_query_count(user)
    return True

def should_reset_query_count(user: User) -> bool:
    """åˆ¤æ–­æ˜¯å¦éœ€è¦é‡ç½®æŸ¥è¯¢è®¡æ•°"""
    
    today = date.today()
    last_reset = user.last_reset_date
    
    if last_reset is None:
        return True
    
    # æ¯æœˆ1å·é‡ç½®
    if today.month != last_reset.month or today.year != last_reset.year:
        return True
    
    return False
```

### æ”¯ä»˜ç³»ç»Ÿé€»è¾‘

#### å¾®ä¿¡æ”¯ä»˜æµç¨‹
```python
async def create_wechat_order(user: User, package: Package) -> Dict:
    """åˆ›å»ºå¾®ä¿¡æ”¯ä»˜è®¢å•"""
    
    # 1. ç”Ÿæˆè®¢å•å·
    order_no = generate_order_number()
    
    # 2. åˆ›å»ºè®¢å•è®°å½•
    order = Order(
        user_id=user.id,
        package_id=package.id,
        order_no=order_no,
        amount=package.price,
        status="pending"
    )
    save_order(order)
    
    # 3. è°ƒç”¨å¾®ä¿¡æ”¯ä»˜API
    prepay_result = await wechat_pay_api.create_prepay_order(
        order_no=order_no,
        amount=int(package.price * 100),  # åˆ†ä¸ºå•ä½
        description=package.name,
        user_openid=user.openid
    )
    
    # 4. æ›´æ–°è®¢å•é¢„æ”¯ä»˜ä¿¡æ¯
    order.prepay_id = prepay_result["prepay_id"]
    update_order(order)
    
    # 5. è¿”å›æ”¯ä»˜å‚æ•°
    return {
        "order_no": order_no,
        "amount": package.price,
        "prepay_info": prepay_result
    }

async def handle_payment_callback(payment_data: Dict) -> bool:
    """å¤„ç†æ”¯ä»˜å›è°ƒ"""
    
    # 1. éªŒè¯å›è°ƒç­¾å
    if not verify_wechat_signature(payment_data):
        return False
    
    # 2. æŸ¥æ‰¾è®¢å•
    order_no = payment_data["out_trade_no"]
    order = get_order_by_number(order_no)
    if not order:
        return False
    
    # 3. æ›´æ–°è®¢å•çŠ¶æ€
    order.status = "paid"
    order.transaction_id = payment_data["transaction_id"]
    order.paid_at = datetime.now()
    update_order(order)
    
    # 4. å‡çº§ç”¨æˆ·ä¼šå‘˜
    await upgrade_user_membership(order.user_id, order.package_id)
    
    return True

async def upgrade_user_membership(user_id: int, package_id: int):
    """å‡çº§ç”¨æˆ·ä¼šå‘˜ç­‰çº§"""
    
    user = get_user_by_id(user_id)
    package = get_package_by_id(package_id)
    
    # æ›´æ–°ä¼šå‘˜ç­‰çº§å’ŒæŸ¥è¯¢é™åˆ¶
    user.membership_level = package.membership_level
    user.query_limit = package.query_limit
    user.queries_used = 0  # é‡ç½®ä½¿ç”¨æ¬¡æ•°
    user.last_reset_date = date.today()
    
    update_user(user)
```

## ğŸ¨ å‰ç«¯æ¶æ„è®¾è®¡

### ç»„ä»¶æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åº”ç”¨æ ¹ç»„ä»¶                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç®¡ç†ç«¯App          â”‚     å®¢æˆ·ç«¯App         â”‚      å…±äº«è®¤è¯ç»„ä»¶             â”‚
â”‚   AdminApp.tsx       â”‚   ClientApp.tsx      â”‚   AuthContext.tsx             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è·¯ç”±ç®¡ç†å±‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç®¡ç†ç«¯è·¯ç”±         â”‚     å®¢æˆ·ç«¯è·¯ç”±        â”‚      æƒé™è·¯ç”±å®ˆå«             â”‚
â”‚   React Router       â”‚   React Router       â”‚   ProtectedRoute              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é¡µé¢ç»„ä»¶å±‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ•°æ®å¯¼å…¥é¡µé¢       â”‚     æ¦‚å¿µåˆ†æé¡µé¢      â”‚      ä¸ªè‚¡åˆ†æé¡µé¢             â”‚
â”‚   DataImportPage     â”‚   ConceptAnalysisPage â”‚   NewStockAnalysisPage       â”‚
â”‚                      â”‚                      â”‚   (æ¦‚å¿µé©±åŠ¨æ¨¡å¼)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç”¨æˆ·ç®¡ç†é¡µé¢       â”‚     æ”¯ä»˜ç®¡ç†é¡µé¢      â”‚      ä»ªè¡¨ç›˜é¡µé¢               â”‚
â”‚   UserManagement     â”‚   PaymentModal       â”‚   Dashboard                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä¸šåŠ¡ç»„ä»¶å±‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ•°æ®è¡¨æ ¼ç»„ä»¶       â”‚     æœç´¢ç»„ä»¶          â”‚      å›¾è¡¨ç»„ä»¶                 â”‚
â”‚   Table/Pagination   â”‚   SearchInput        â”‚   Chart/Trend                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    è¡¨å•ç»„ä»¶           â”‚     å¼¹çª—ç»„ä»¶          â”‚      çŠ¶æ€ç»„ä»¶                 â”‚
â”‚   Form/Input         â”‚   Modal/Drawer       â”‚   Loading/Error               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æœåŠ¡å±‚                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    APIå®¢æˆ·ç«¯          â”‚     è®¤è¯æœåŠ¡          â”‚      å·¥å…·å‡½æ•°                 â”‚
â”‚   adminApiClient     â”‚   auth-utils         â”‚   utils/format               â”‚
â”‚   userApiClient      â”‚   tokenç®¡ç†          â”‚   typeså®šä¹‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 1. æ–°è‚¡ç¥¨åˆ†æé¡µé¢ (æ¦‚å¿µé©±åŠ¨æ¨¡å¼)
```typescript
interface NewStockAnalysisPageProps {}

interface ConceptSummary {
  concept_name: string;
  total_volume: number;
  stock_count: number;
  avg_volume: number;
  max_volume: number;
  trading_date: string;
  volume_percentage: number;
}

interface StockInfo {
  stock_code: string;
  stock_name: string;
  trading_volume: number;
  concept_rank: number;
  volume_percentage: number;
}

const NewStockAnalysisPage: React.FC = () => {
  // çŠ¶æ€ç®¡ç†
  const [conceptSummaries, setConceptSummaries] = useState<ConceptSummary[]>([]);
  const [loading, setLoading] = useState(false);
  const [tradingDate, setTradingDate] = useState<string>('2025-09-02');
  const [searchText, setSearchText] = useState('');
  
  // è‚¡ç¥¨åˆ—è¡¨å¼¹çª—çŠ¶æ€
  const [stockModalVisible, setStockModalVisible] = useState(false);
  const [selectedConceptName, setSelectedConceptName] = useState<string>('');
  const [stockList, setStockList] = useState<StockInfo[]>([]);
  
  // æ ¸å¿ƒé€»è¾‘å‡½æ•°
  const fetchConceptSummaries = async () => {
    // è·å–æ¦‚å¿µæ±‡æ€»æ•°æ®
  };
  
  const fetchConceptStocks = async (conceptName: string) => {
    // è·å–æ¦‚å¿µä¸‹è‚¡ç¥¨åˆ—è¡¨
  };
  
  const handleViewStocks = async (conceptName: string) => {
    // å¤„ç†æŸ¥çœ‹è‚¡ç¥¨æ“ä½œ
  };
  
  return (
    // JSX æ¸²æŸ“é€»è¾‘
  );
};
```

#### 2. è®¤è¯ä¸Šä¸‹æ–‡ç»„ä»¶
```typescript
interface AuthContextType {
  isAuthenticated: boolean;
  user: User | null;
  login: (credentials: LoginCredentials) => Promise<boolean>;
  logout: () => void;
  loading: boolean;
}

export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({
  children
}) => {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  
  // è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°é€»è¾‘
  useEffect(() => {
    const refreshToken = async () => {
      const token = localStorage.getItem('access_token');
      if (token && !isTokenExpired(token)) {
        try {
          const userData = await validateToken(token);
          setUser(userData);
        } catch (error) {
          logout();
        }
      }
      setLoading(false);
    };
    
    refreshToken();
  }, []);
  
  const login = async (credentials: LoginCredentials) => {
    try {
      const response = await apiClient.post('/auth/login', credentials);
      const { access_token, user_info } = response.data;
      
      localStorage.setItem('access_token', access_token);
      setUser(user_info);
      return true;
    } catch (error) {
      return false;
    }
  };
  
  const logout = () => {
    localStorage.removeItem('access_token');
    setUser(null);
  };
  
  return (
    <AuthContext.Provider value={{ 
      isAuthenticated: !!user, 
      user, 
      login, 
      logout, 
      loading 
    }}>
      {children}
    </AuthContext.Provider>
  );
};
```

#### 3. APIå®¢æˆ·ç«¯é…ç½®
```typescript
import axios, { AxiosInstance } from 'axios';

// ç®¡ç†å‘˜APIå®¢æˆ·ç«¯
export const adminApiClient: AxiosInstance = axios.create({
  baseURL: 'http://localhost:3007',
  timeout: 30000,
});

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ è®¤è¯ä»¤ç‰Œ
adminApiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('admin_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ - å¤„ç†è®¤è¯é”™è¯¯
adminApiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // æ¸…é™¤è¿‡æœŸä»¤ç‰Œï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      localStorage.removeItem('admin_token');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// ç”¨æˆ·APIå®¢æˆ·ç«¯
export const userApiClient: AxiosInstance = axios.create({
  baseURL: 'http://localhost:3007',
  timeout: 30000,
});

// ç±»ä¼¼çš„æ‹¦æˆªå™¨é…ç½®...
```

### çŠ¶æ€ç®¡ç†ç­–ç•¥

#### React HooksçŠ¶æ€ç®¡ç†
```typescript
// è‡ªå®šä¹‰Hookï¼šAPIæ•°æ®è·å–
export const useConceptSummary = (tradingDate: string) => {
  const [data, setData] = useState<ConceptSummary[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  const fetchData = useCallback(async () => {
    setLoading(true);
    setError(null);
    
    try {
      const response = await adminApiClient.get(
        `/api/v1/stock-analysis/concepts/daily-summary?trading_date=${tradingDate}&size=500`
      );
      setData(response.data.summaries || []);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setLoading(false);
    }
  }, [tradingDate]);
  
  useEffect(() => {
    fetchData();
  }, [fetchData]);
  
  return { data, loading, error, refetch: fetchData };
};

// è‡ªå®šä¹‰Hookï¼šç”¨æˆ·è®¤è¯çŠ¶æ€
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
```

## ğŸš€ éƒ¨ç½²å’Œè¿ç»´è®¾è®¡

### Dockerå®¹å™¨åŒ–éƒ¨ç½²

#### 1. åç«¯Dockerfile
```dockerfile
FROM python:3.10-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    default-libmysqlclient-dev \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 3007

# å¯åŠ¨å‘½ä»¤
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "3007"]
```

#### 2. å‰ç«¯Dockerfile
```dockerfile
FROM node:18-alpine

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci --only=production

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN npm run build

# ä½¿ç”¨nginxæœåŠ¡é™æ€æ–‡ä»¶
FROM nginx:alpine
COPY --from=0 /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### 3. Docker Composeé…ç½®
```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    container_name: stock_backend
    ports:
      - "3007:3007"
    environment:
      - DATABASE_URL=mysql://root:password@mysql:3306/stock_analysis
      - JWT_SECRET_KEY=your-secret-key
    depends_on:
      - mysql
    volumes:
      - ./backend/logs:/app/logs

  frontend:
    build: ./frontend
    container_name: stock_frontend
    ports:
      - "8006:80"
    depends_on:
      - backend

  client:
    build: ./client
    container_name: stock_client
    ports:
      - "8005:80"
    depends_on:
      - backend

  mysql:
    image: mysql:8.0
    container_name: stock_mysql
    environment:
      - MYSQL_ROOT_PASSWORD=password
      - MYSQL_DATABASE=stock_analysis
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql

volumes:
  mysql_data:
```

### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

#### deploy.shè„šæœ¬é€»è¾‘
```bash
#!/bin/bash

# è‚¡ç¥¨åˆ†æç³»ç»Ÿ - éƒ¨ç½²è„šæœ¬ v2.6.0
echo "ğŸš€ è‚¡ç¥¨åˆ†æç³»ç»Ÿéƒ¨ç½² v2.6.0"
echo "========================="

# ç¯å¢ƒæ£€æŸ¥
check_environment() {
    echo "ğŸ” ç¯å¢ƒæ£€æŸ¥..."
    
    # æ£€æŸ¥Docker
    if ! command -v docker &> /dev/null; then
        echo "âŒ Dockeræœªå®‰è£…"
        exit 1
    fi
    
    # æ£€æŸ¥Node.js
    if ! command -v node &> /dev/null; then
        echo "âŒ Node.jsæœªå®‰è£…"
        exit 1
    fi
    
    # æ£€æŸ¥Python
    if ! command -v python3 &> /dev/null; then
        echo "âŒ Python3æœªå®‰è£…"
        exit 1
    fi
    
    echo "âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡"
}

# æ•°æ®åº“åˆå§‹åŒ–
setup_database() {
    echo "ğŸ—ƒï¸ æ•°æ®åº“åˆå§‹åŒ–..."
    
    # æ£€æŸ¥MySQLè¿æ¥
    mysql -h127.0.0.1 -uroot -e "SELECT 1;" 2>/dev/null
    if [ $? -ne 0 ]; then
        echo "âŒ MySQLè¿æ¥å¤±è´¥"
        exit 1
    fi
    
    # åˆ›å»ºæ•°æ®åº“
    mysql -h127.0.0.1 -uroot -e "CREATE DATABASE IF NOT EXISTS stock_analysis;"
    
    # æ‰§è¡Œè¡¨ç»“æ„
    mysql -h127.0.0.1 -uroot stock_analysis < database/init.sql
    
    echo "âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ"
}

# åç«¯è®¾ç½®
setup_backend() {
    echo "ğŸ åç«¯è®¾ç½®..."
    
    cd backend
    
    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
    python3 -m venv venv
    source venv/bin/activate
    
    # å®‰è£…ä¾èµ–
    pip install -r requirements.txt
    
    # åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
    python create_admin.py
    
    cd ..
    echo "âœ… åç«¯è®¾ç½®å®Œæˆ"
}

# å‰ç«¯è®¾ç½®
setup_frontend() {
    echo "âš›ï¸ å‰ç«¯è®¾ç½®..."
    
    # ç®¡ç†ç«¯å‰ç«¯
    cd frontend
    npm install
    npm run build
    cd ..
    
    # å®¢æˆ·ç«¯å‰ç«¯
    cd client
    npm install
    npm run build
    cd ..
    
    echo "âœ… å‰ç«¯è®¾ç½®å®Œæˆ"
}

# ä¸»æ‰§è¡Œæµç¨‹
main() {
    check_environment
    setup_database
    setup_backend
    setup_frontend
    
    echo ""
    echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
    echo "ğŸ“Š ç®¡ç†ç«¯: http://localhost:8006"
    echo "ğŸ‘¥ å®¢æˆ·ç«¯: http://localhost:8005"
    echo "ğŸ”§ APIæ–‡æ¡£: http://localhost:3007/docs"
}

# æ‰§è¡Œä¸»æµç¨‹
main
```

### ç›‘æ§å’Œæ—¥å¿—è®¾è®¡

#### 1. åº”ç”¨æ—¥å¿—é…ç½®
```python
import logging
from logging.handlers import RotatingFileHandler

# æ—¥å¿—é…ç½®
def setup_logging():
    # åˆ›å»ºæ—¥å¿—æ ¼å¼
    formatter = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    )
    
    # æ–‡ä»¶å¤„ç†å™¨ - è‡ªåŠ¨è½®è½¬
    file_handler = RotatingFileHandler(
        'logs/app.log',
        maxBytes=10*1024*1024,  # 10MB
        backupCount=5
    )
    file_handler.setFormatter(formatter)
    file_handler.setLevel(logging.INFO)
    
    # æ§åˆ¶å°å¤„ç†å™¨
    console_handler = logging.StreamHandler()
    console_handler.setFormatter(formatter)
    console_handler.setLevel(logging.INFO)
    
    # æ ¹æ—¥å¿—å™¨é…ç½®
    root_logger = logging.getLogger()
    root_logger.setLevel(logging.INFO)
    root_logger.addHandler(file_handler)
    root_logger.addHandler(console_handler)
    
    return root_logger
```

#### 2. æ€§èƒ½ç›‘æ§
```python
import time
from functools import wraps

def monitor_performance(func):
    """æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
    
    @wraps(func)
    async def wrapper(*args, **kwargs):
        start_time = time.time()
        
        try:
            result = await func(*args, **kwargs)
            execution_time = time.time() - start_time
            
            # è®°å½•æ€§èƒ½æŒ‡æ ‡
            logger.info(f"{func.__name__} executed in {execution_time:.3f}s")
            
            # æ…¢æŸ¥è¯¢å‘Šè­¦
            if execution_time > 5.0:
                logger.warning(f"Slow query detected: {func.__name__} took {execution_time:.3f}s")
            
            return result
            
        except Exception as e:
            execution_time = time.time() - start_time
            logger.error(f"{func.__name__} failed after {execution_time:.3f}s: {str(e)}")
            raise
    
    return wrapper

# ä½¿ç”¨ç¤ºä¾‹
@monitor_performance
async def get_concept_summary(trading_date: str):
    # APIé€»è¾‘
    pass
```

#### 3. å¥åº·æ£€æŸ¥ç«¯ç‚¹
```python
from fastapi import APIRouter

health_router = APIRouter()

@health_router.get("/health")
async def health_check():
    """ç³»ç»Ÿå¥åº·æ£€æŸ¥"""
    
    health_status = {
        "status": "healthy",
        "timestamp": datetime.now().isoformat(),
        "version": "v2.6.0",
        "checks": {}
    }
    
    # æ•°æ®åº“è¿æ¥æ£€æŸ¥
    try:
        db.execute("SELECT 1")
        health_status["checks"]["database"] = "healthy"
    except Exception as e:
        health_status["checks"]["database"] = f"unhealthy: {str(e)}"
        health_status["status"] = "unhealthy"
    
    # ç£ç›˜ç©ºé—´æ£€æŸ¥
    import shutil
    total, used, free = shutil.disk_usage("/")
    free_percent = free / total * 100
    
    if free_percent < 10:
        health_status["checks"]["disk"] = f"warning: {free_percent:.1f}% free"
    else:
        health_status["checks"]["disk"] = f"healthy: {free_percent:.1f}% free"
    
    return health_status
```

## ğŸ“‹ å¼€å‘è§„èŒƒä¸ç»´æŠ¤

### ä»£ç è§„èŒƒ

#### 1. Pythonåç«¯è§„èŒƒ
```python
# ç±»å‹æ³¨è§£
from typing import List, Dict, Optional, Union
from pydantic import BaseModel

# æ•°æ®æ¨¡å‹å®šä¹‰
class ConceptSummaryResponse(BaseModel):
    concept_name: str
    total_volume: int
    stock_count: int
    avg_volume: float
    max_volume: int
    trading_date: str
    volume_percentage: float

# å‡½æ•°æ³¨è§£
async def get_concept_summary(
    trading_date: Optional[str] = None,
    page: int = 1,
    size: int = 50
) -> Dict[str, Union[List[ConceptSummaryResponse], Dict]]:
    """è·å–æ¦‚å¿µæ±‡æ€»æ•°æ®
    
    Args:
        trading_date: äº¤æ˜“æ—¥æœŸï¼Œæ ¼å¼YYYY-MM-DD
        page: é¡µç ï¼Œä»1å¼€å§‹
        size: æ¯é¡µæ•°é‡ï¼Œæœ€å¤§2000
        
    Returns:
        åŒ…å«æ¦‚å¿µæ±‡æ€»æ•°æ®å’Œåˆ†é¡µä¿¡æ¯çš„å­—å…¸
        
    Raises:
        HTTPException: å½“å‚æ•°éªŒè¯å¤±è´¥æˆ–æ•°æ®æŸ¥è¯¢é”™è¯¯æ—¶
    """
    pass

# é”™è¯¯å¤„ç†
try:
    result = await some_operation()
    return {"success": True, "data": result}
except ValidationError as e:
    logger.warning(f"Validation error: {e}")
    raise HTTPException(status_code=422, detail=str(e))
except Exception as e:
    logger.error(f"Unexpected error: {e}")
    raise HTTPException(status_code=500, detail="Internal server error")
```

#### 2. TypeScriptå‰ç«¯è§„èŒƒ
```typescript
// æ¥å£å®šä¹‰
interface ConceptSummary {
  concept_name: string;
  total_volume: number;
  stock_count: number;
  avg_volume: number;
  max_volume: number;
  trading_date: string;
  volume_percentage: number;
}

interface ApiResponse<T> {
  success: boolean;
  data?: T;
  message?: string;
  pagination?: {
    page: number;
    size: number;
    total: number;
    has_more: boolean;
  };
}

// Reactç»„ä»¶è§„èŒƒ
interface NewStockAnalysisPageProps {
  initialDate?: string;
}

const NewStockAnalysisPage: React.FC<NewStockAnalysisPageProps> = ({
  initialDate = '2025-09-02'
}) => {
  // çŠ¶æ€å®šä¹‰
  const [conceptSummaries, setConceptSummaries] = useState<ConceptSummary[]>([]);
  const [loading, setLoading] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  
  // å‰¯ä½œç”¨
  useEffect(() => {
    fetchConceptSummaries();
  }, [tradingDate]);
  
  // äº‹ä»¶å¤„ç†
  const handleSearch = useCallback((value: string) => {
    setSearchText(value);
  }, []);
  
  return (
    <div>
      {/* JSX */}
    </div>
  );
};

export default NewStockAnalysisPage;
```

### ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ

#### Gitæäº¤æ¶ˆæ¯è§„èŒƒ
```bash
# æ ¼å¼ï¼š<type>(<scope>): <subject>

# ç±»å‹è¯´æ˜ï¼š
feat:     æ–°åŠŸèƒ½
fix:      bugä¿®å¤
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹ï¼š
feat(api): æ–°å¢æ¦‚å¿µè‚¡ç¥¨åˆ—è¡¨API
fix(frontend): ä¿®å¤è‚¡ç¥¨ä»£ç æœç´¢é—®é¢˜
docs(readme): æ›´æ–°v2.6.0åŠŸèƒ½è¯´æ˜
refactor(database): ä¼˜åŒ–è‚¡ç¥¨ä»£ç åŒ¹é…é€»è¾‘
```

#### åˆ†æ”¯ç®¡ç†ç­–ç•¥
```bash
# ä¸»åˆ†æ”¯
main          # ç”Ÿäº§ç¯å¢ƒä»£ç 
develop       # å¼€å‘ç¯å¢ƒä»£ç 

# åŠŸèƒ½åˆ†æ”¯
feature/concept-driven-analysis    # æ¦‚å¿µé©±åŠ¨åˆ†æåŠŸèƒ½
feature/payment-system            # æ”¯ä»˜ç³»ç»ŸåŠŸèƒ½
feature/admin-management          # ç®¡ç†å‘˜ç®¡ç†åŠŸèƒ½

# ä¿®å¤åˆ†æ”¯
hotfix/login-bug-fix              # ç´§æ€¥ä¿®å¤åˆ†æ”¯

# å‘å¸ƒåˆ†æ”¯
release/v2.6.0                    # ç‰ˆæœ¬å‘å¸ƒåˆ†æ”¯
```

### æµ‹è¯•ç­–ç•¥

#### 1. åç«¯å•å…ƒæµ‹è¯•
```python
import pytest
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

class TestStockAnalysisAPI:
    """è‚¡ç¥¨åˆ†æAPIæµ‹è¯•"""
    
    def test_get_concept_summary_success(self):
        """æµ‹è¯•è·å–æ¦‚å¿µæ±‡æ€»æˆåŠŸ"""
        response = client.get(
            "/api/v1/stock-analysis/concepts/daily-summary",
            params={"trading_date": "2025-09-02", "size": 10}
        )
        assert response.status_code == 200
        data = response.json()
        assert "summaries" in data
        assert "pagination" in data
    
    def test_get_concept_summary_invalid_date(self):
        """æµ‹è¯•æ— æ•ˆæ—¥æœŸå‚æ•°"""
        response = client.get(
            "/api/v1/stock-analysis/concepts/daily-summary",
            params={"trading_date": "invalid-date"}
        )
        assert response.status_code == 422
    
    def test_get_concept_stocks_success(self):
        """æµ‹è¯•è·å–æ¦‚å¿µè‚¡ç¥¨åˆ—è¡¨æˆåŠŸ"""
        response = client.get(
            "/api/v1/stock-analysis/concept/èèµ„èåˆ¸/stocks",
            params={"trading_date": "2025-09-02", "limit": 10}
        )
        assert response.status_code == 200
        data = response.json()
        assert "stocks" in data
        assert data["concept_name"] == "èèµ„èåˆ¸"

@pytest.fixture
def sample_trading_data():
    """æµ‹è¯•ç”¨äº¤æ˜“æ•°æ®"""
    return [
        {"stock_code": "SH600000", "trading_volume": 1000000, "trading_date": "2025-09-02"},
        {"stock_code": "SZ000001", "trading_volume": 2000000, "trading_date": "2025-09-02"},
    ]
```

#### 2. å‰ç«¯ç»„ä»¶æµ‹è¯•
```typescript
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import '@testing-library/jest-dom';
import NewStockAnalysisPage from './NewStockAnalysisPage';

// Mock APIå®¢æˆ·ç«¯
jest.mock('../../../shared/admin-auth', () => ({
  adminApiClient: {
    get: jest.fn()
  }
}));

describe('NewStockAnalysisPage', () => {
  beforeEach(() => {
    // é‡ç½®mock
    jest.clearAllMocks();
  });
  
  test('renders page title correctly', () => {
    render(<NewStockAnalysisPage />);
    expect(screen.getByText('è‚¡ç¥¨åˆ†æ - æ¦‚å¿µé©±åŠ¨è§†å›¾')).toBeInTheDocument();
  });
  
  test('fetches concept summaries on mount', async () => {
    const mockResponse = {
      data: {
        summaries: [
          {
            concept_name: 'èèµ„èåˆ¸',
            total_volume: 622580139,
            stock_count: 2565,
            avg_volume: 242721.0,
            max_volume: 12968518,
            trading_date: '2025-09-02',
            volume_percentage: 4.86
          }
        ],
        pagination: { total: 1 }
      }
    };
    
    (adminApiClient.get as jest.Mock).mockResolvedValue(mockResponse);
    
    render(<NewStockAnalysisPage />);
    
    await waitFor(() => {
      expect(screen.getByText('èèµ„èåˆ¸')).toBeInTheDocument();
    });
  });
  
  test('handles search functionality', async () => {
    render(<NewStockAnalysisPage />);
    
    const searchInput = screen.getByPlaceholderText('æœç´¢æ¦‚å¿µåç§°...');
    fireEvent.change(searchInput, { target: { value: 'é“¶è¡Œ' } });
    
    // éªŒè¯æœç´¢åŠŸèƒ½
    await waitFor(() => {
      expect(searchInput).toHaveValue('é“¶è¡Œ');
    });
  });
});
```

### æ€§èƒ½ä¼˜åŒ–æŒ‡å—

#### 1. æ•°æ®åº“ä¼˜åŒ–
```sql
-- åˆ›å»ºå¤åˆç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX idx_concept_date_volume ON concept_daily_summary(trading_date, total_volume DESC);

-- åˆ†åŒºè¡¨å¤„ç†å†å²æ•°æ®ï¼ˆæŒ‰æœˆåˆ†åŒºï¼‰
ALTER TABLE daily_trading PARTITION BY RANGE (YEAR(trading_date) * 100 + MONTH(trading_date))
(
  PARTITION p202409 VALUES LESS THAN (202410),
  PARTITION p202410 VALUES LESS THAN (202411),
  PARTITION p_future VALUES LESS THAN MAXVALUE
);

-- æŸ¥è¯¢ä¼˜åŒ–ï¼šä½¿ç”¨EXPLAINåˆ†æ
EXPLAIN SELECT 
  concept_name, 
  total_volume, 
  stock_count 
FROM concept_daily_summary 
WHERE trading_date = '2025-09-02' 
ORDER BY total_volume DESC 
LIMIT 50;
```

#### 2. å‰ç«¯æ€§èƒ½ä¼˜åŒ–
```typescript
import { memo, useCallback, useMemo } from 'react';

// ç»„ä»¶memoåŒ–
const ConceptListItem = memo<ConceptListItemProps>(({ concept, onViewStocks }) => {
  const handleClick = useCallback(() => {
    onViewStocks(concept.concept_name);
  }, [concept.concept_name, onViewStocks]);
  
  const formattedVolume = useMemo(() => {
    return concept.total_volume.toLocaleString();
  }, [concept.total_volume]);
  
  return (
    <div onClick={handleClick}>
      <span>{concept.concept_name}</span>
      <span>{formattedVolume}</span>
    </div>
  );
});

// è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å¤§åˆ—è¡¨
import { FixedSizeList as List } from 'react-window';

const VirtualizedConceptList: React.FC<{ concepts: ConceptSummary[] }> = ({ concepts }) => {
  const Row = ({ index, style }: { index: number; style: React.CSSProperties }) => (
    <div style={style}>
      <ConceptListItem concept={concepts[index]} />
    </div>
  );
  
  return (
    <List
      height={400}
      itemCount={concepts.length}
      itemSize={60}
      width="100%"
    >
      {Row}
    </List>
  );
};
```

#### 3. APIæ€§èƒ½ä¼˜åŒ–
```python
from functools import lru_cache
from sqlalchemy import text

# ç¼“å­˜å¸¸ç”¨æŸ¥è¯¢ç»“æœ
@lru_cache(maxsize=128)
def get_concept_list_cached() -> List[str]:
    """è·å–æ¦‚å¿µåˆ—è¡¨ï¼ˆç¼“å­˜1å°æ—¶ï¼‰"""
    return db.query(Concept.concept_name).filter(Concept.is_active == True).all()

# ä½¿ç”¨åŸç”ŸSQLä¼˜åŒ–å¤æ‚æŸ¥è¯¢
async def get_concept_summary_optimized(trading_date: str, limit: int = 50):
    """ä¼˜åŒ–çš„æ¦‚å¿µæ±‡æ€»æŸ¥è¯¢"""
    
    # ä½¿ç”¨åŸç”ŸSQLé¿å…ORMå¼€é”€
    query = text("""
        SELECT 
            concept_name,
            total_volume,
            stock_count,
            average_volume,
            max_volume,
            trading_date,
            (total_volume * 100.0 / (
                SELECT SUM(total_volume) 
                FROM concept_daily_summary 
                WHERE trading_date = :trading_date
            )) as volume_percentage
        FROM concept_daily_summary
        WHERE trading_date = :trading_date
        ORDER BY total_volume DESC
        LIMIT :limit
    """)
    
    result = db.execute(query, {
        "trading_date": trading_date,
        "limit": limit
    }).fetchall()
    
    return [dict(row) for row in result]

# æ‰¹é‡æ“ä½œä¼˜åŒ–
async def bulk_insert_trading_data(trading_data: List[Dict]) -> int:
    """æ‰¹é‡æ’å…¥äº¤æ˜“æ•°æ®"""
    
    # ä½¿ç”¨æ‰¹é‡æ’å…¥æå‡æ€§èƒ½
    stmt = """
        INSERT INTO daily_trading (stock_code, trading_date, trading_volume)
        VALUES (%s, %s, %s)
        ON DUPLICATE KEY UPDATE trading_volume = VALUES(trading_volume)
    """
    
    values = [
        (item['stock_code'], item['trading_date'], item['trading_volume'])
        for item in trading_data
    ]
    
    db.executemany(stmt, values)
    return len(values)
```

## ğŸ“ˆ ç‰ˆæœ¬å†å²ä¸è·¯çº¿å›¾

### ç‰ˆæœ¬å‘å¸ƒå†å²

#### v2.6.0 (2025-09-13) - æ¦‚å¿µé©±åŠ¨é‡æ„
- ğŸš€ **æ ¸å¿ƒåŠŸèƒ½**: è‚¡ç¥¨åˆ†æé¡µé¢é‡æ„ä¸ºæ¦‚å¿µé©±åŠ¨æ¨¡å¼
- ğŸ“Š **æ•°æ®ç»“æ„**: ä¸¤å±‚æ•°æ®å±•ç¤ºï¼ˆæ¦‚å¿µæ±‡æ€»â†’è‚¡ç¥¨è¯¦æƒ…ï¼‰
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: APIå‚æ•°é™åˆ¶æå‡ï¼Œæ”¯æŒå¤§æ•°æ®é‡æŸ¥è¯¢
- ğŸ¯ **ç”¨æˆ·ä½“éªŒ**: æœç´¢ã€æ’åºã€åˆ†é¡µç­‰å®Œæ•´äº¤äº’åŠŸèƒ½

#### v2.5.1 (2025-09-12) - é‡æ–°è®¡ç®—åŠŸèƒ½ä¿®å¤
- ğŸ”§ **Bugä¿®å¤**: é‡æ–°è®¡ç®—æŒ‰é’®ç½‘ç»œè¿æ¥å¤±è´¥é—®é¢˜
- â±ï¸ **è¶…æ—¶ä¼˜åŒ–**: APIè¶…æ—¶ç­–ç•¥ä¼˜åŒ–ï¼Œé•¿æ“ä½œæ”¯æŒ
- ğŸ—ï¸ **æ¶æ„æ”¹è¿›**: å¯¼å…¥å’Œé‡æ–°è®¡ç®—é€»è¾‘ç»Ÿä¸€

#### v2.5.0 (2025-09-11) - é¡µé¢åŠŸèƒ½é‡æ„
- ğŸ“‹ **åŠŸèƒ½æ˜ç¡®**: ä¸‰ä¸ªåˆ†æé¡µé¢èŒè´£æ˜ç¡®åˆ†ç¦»
- ğŸ” **æ•°æ®ä¸€è‡´**: è‚¡ç¥¨ä»£ç åŒ¹é…é€»è¾‘ç»Ÿä¸€
- ğŸ“Š **æ’åºä¼˜åŒ–**: æ¦‚å¿µåˆ—è¡¨ä¸¥æ ¼æŒ‰äº¤æ˜“é‡æ’åº

#### v2.4.2 (2025-09-11) - è®¤è¯ç³»ç»Ÿé‡æ„
- ğŸ” **JWTä¼˜åŒ–**: è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°æœºåˆ¶
- ğŸ‘¥ **æƒé™åˆ†ç¦»**: ç®¡ç†å‘˜å’Œç”¨æˆ·æƒé™æ˜ç¡®åŒºåˆ†
- ğŸ›¡ï¸ **å®‰å…¨å¢å¼º**: è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

#### v2.4.1 (2025-09-08) - è‚¡ç¥¨åˆ†æå¢å¼º
- ğŸ” **ä»£ç æ”¯æŒ**: SH/SZ/BJå‰ç¼€æ™ºèƒ½è¯†åˆ«
- ğŸ“Š **ç•Œé¢é‡æ„**: æ¦‚å¿µåˆ†æå¡ç‰‡å¼è®¾è®¡
- ğŸ¨ **ä½“éªŒä¼˜åŒ–**: å“åº”å¼è®¾è®¡å’Œé”™è¯¯å¤„ç†

### æœªæ¥ç‰ˆæœ¬è§„åˆ’

#### v2.7.0 (è®¡åˆ’2025-09-20) - æ•°æ®å¯è§†åŒ–å¢å¼º
- ğŸ“ˆ **å›¾è¡¨ç³»ç»Ÿ**: æ¦‚å¿µè¶‹åŠ¿å›¾å’Œè‚¡ç¥¨æ’åå›¾è¡¨
- ğŸ¯ **äº¤äº’å¼å›¾è¡¨**: æ”¯æŒæ—¶é—´èŒƒå›´é€‰æ‹©å’Œé’»å–åˆ†æ
- ğŸ“Š **ä»ªè¡¨ç›˜**: ç®¡ç†ç«¯æ•°æ®æ¦‚è§ˆä»ªè¡¨ç›˜
- ğŸ”„ **å®æ—¶æ›´æ–°**: WebSocketå®æ—¶æ•°æ®æ¨é€

#### v2.8.0 (è®¡åˆ’2025-10-01) - ç§»åŠ¨ç«¯é€‚é…
- ğŸ“± **å“åº”å¼ä¼˜åŒ–**: ç§»åŠ¨ç«¯ç•Œé¢é€‚é…
- ğŸ‘† **è§¦æ‘¸äº¤äº’**: ç§»åŠ¨ç«¯æ‰‹åŠ¿æ“ä½œæ”¯æŒ
- ğŸ”” **æ¨é€é€šçŸ¥**: å…³é”®æ•°æ®å˜åŒ–é€šçŸ¥
- ğŸ“² **PWAæ”¯æŒ**: æ¸è¿›å¼Webåº”ç”¨

#### v3.0.0 (è®¡åˆ’2025-10-15) - å¾®æœåŠ¡æ¶æ„
- ğŸ—ï¸ **æ¶æ„å‡çº§**: å¾®æœåŠ¡åŒ–æ‹†åˆ†
- ğŸš€ **å®¹å™¨ç¼–æ’**: Kuberneteséƒ¨ç½²æ”¯æŒ
- ğŸ“Š **ç›‘æ§ç³»ç»Ÿ**: å®Œæ•´çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»
- ğŸ”„ **CI/CD**: è‡ªåŠ¨åŒ–éƒ¨ç½²æµæ°´çº¿

---

## ğŸ“ ç»´æŠ¤å’Œæ”¯æŒ

### æ–‡æ¡£ç»´æŠ¤è§„èŒƒ

**æ›´æ–°é¢‘ç‡**: æ¯æ¬¡ç‰ˆæœ¬å‘å¸ƒæ—¶å¿…é¡»æ›´æ–°
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜ŸæŠ€æœ¯è´Ÿè´£äºº
**å®¡æ ¸æµç¨‹**: ä»£ç å®¡æŸ¥ â†’ æ–‡æ¡£æ›´æ–° â†’ æµ‹è¯•éªŒè¯ â†’ å‘å¸ƒ

### é—®é¢˜åé¦ˆæ¸ é“

**BugæŠ¥å‘Š**: GitHub Issues
**åŠŸèƒ½å»ºè®®**: å¼€å‘å›¢é˜Ÿå†…éƒ¨è®¨è®º
**ç´§æ€¥é—®é¢˜**: ç›´æ¥è”ç³»æŠ€æœ¯è´Ÿè´£äºº

### æŠ€æœ¯å€ºåŠ¡ç®¡ç†

**ä»£ç é‡æ„**: æ¯ä¸ªç‰ˆæœ¬é¢„ç•™20%æ—¶é—´è¿›è¡Œé‡æ„
**æ€§èƒ½ä¼˜åŒ–**: å®šæœŸæ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
**å®‰å…¨æ›´æ–°**: åŠæ—¶æ›´æ–°ä¾èµ–åº“å’Œå®‰å…¨è¡¥ä¸

---

**æ–‡æ¡£ç»´æŠ¤**: æŠ€æœ¯å›¢é˜Ÿ | **æœ€åæ›´æ–°**: 2025-09-13 | **ä¸‹æ¬¡æ›´æ–°**: v2.7.0å‘å¸ƒæ—¶